
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Flipbook Viewer</title>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/turn.js/4.1.0/turn.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.4.120/pdf.min.js"></script>
  <style>
    body { margin: 0; background: #eee; font-family: sans-serif; }
    #flipbook { width: 90vw; height: 80vh; margin: 40px auto; }
    .page { width: 45vw; height: 80vh; background: white; box-shadow: 0 0 8px rgba(0,0,0,0.2); }
    canvas { width: 100% !important; height: auto !important; display: block; }
  </style>
</head>
<body>
  <div id="flipbook"></div>

  <script>
    const url = "Ebook.pdf";
    const container = document.getElementById("flipbook");
    pdfjsLib.GlobalWorkerOptions.workerSrc = "https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.4.120/pdf.worker.min.js";

    pdfjsLib.getDocument(url).promise.then(async function(pdf) {
      const totalPages = pdf.numPages;
      const pageElements = [];

      for (let i = 1; i <= totalPages; i++) {
        const page = await pdf.getPage(i);
        const viewport = page.getViewport({ scale: 1.5 });
        const canvas = document.createElement("canvas");
        const context = canvas.getContext("2d");
        canvas.height = viewport.height;
        canvas.width = viewport.width;

        await page.render({ canvasContext: context, viewport }).promise;

        const pageDiv = document.createElement("div");
        pageDiv.className = "page";
        pageDiv.appendChild(canvas);
        pageElements.push(pageDiv);
      }

      for (const el of pageElements) container.appendChild(el);

      setTimeout(() => {
        $('#flipbook').turn({
          width: container.offsetWidth,
          height: container.offsetHeight,
          autoCenter: true
        });
      }, 100);
    });
  </script>
</body>
</html>
